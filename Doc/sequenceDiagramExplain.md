# **OBservator 시퀀스 다이어그램 정리**

---

## **1. 회원가입 및 거래 키 발급 시퀀스**

### **개요**  

이 시퀀스는 사용자가 **회원가입**을 수행하고 Upbit 거래 키를 발급받아 시스템에 저장하는 과정을 설명합니다.

### **시나리오 흐름**

#### **회원가입 시퀀스**  

1. **회원가입 정보 입력**: 사용자가 웹 UI에 회원가입 정보를 입력합니다.  
2. **중복 여부 확인**: 거래 서버가 사용자DB에서 회원정보 중복 여부를 확인합니다.  
3. **중복 확인 결과**:  
   - 중복된 정보가 있을 경우, 회원가입 실패 메시지를 반환합니다.  
   - 중복이 아니면 사용자 정보를 사용자DB에 저장하고 회원가입 성공 메시지를 반환합니다.

#### **거래 키 발급 및 저장 시퀀스**  

1. **거래 키 발급 요청**: 사용자가 Upbit 거래소에 거래 키를 요청합니다.  
2. **거래 키 전달**: Upbit에서 거래 키를 사용자에게 전달합니다.  
3. **거래 키 입력**: 사용자는 거래 키를 웹 UI에 입력합니다.  
4. **거래 키 저장**: 거래 서버가 사용자DB에 거래 키를 저장합니다.  
5. **거래 키 표시**: 저장된 거래 키를 사용자에게 반환합니다.

### **다이어그램**  

![Signup and API Key Issuance](/Doc/Diagrams/happy_diagrams-sequence_key.drawio.png)

---

## **2. 모델 학습 시퀀스**

### **개요**  

모델 학습 시퀀스는 관리자가 학습 명령을 수행하면 시스템이 누적된 데이터를 바탕으로 새로운 모델을 학습하고 업데이트하는 과정을 설명합니다. 거래 서버는 데이터를 주기적으로 수집하여 데이터DB에 저장하며, ML 서버는 이 데이터를 활용하여 학습을 진행합니다.

### **시나리오 흐름**  

1. **실시간 데이터 수집**: 거래 서버가 Upbit에서 실시간 데이터를 요청하고 누적합니다.  
2. **데이터 저장**: 매일 자정(0시 5분)에 누적 데이터를 데이터DB에 저장합니다.  
3. **학습 수행**: 관리자가 ML 서버에 학습 명령을 전달하면, ML 서버는 데이터DB에서 데이터를 불러와 모델 학습을 진행합니다.  
4. **모델 저장**: 학습 완료 후, 새로운 모델이 저장됩니다.  

### **다이어그램**  

![Model Training Sequence](/Doc/Diagrams/happy_diagrams-sequence_train.drawio.png)

---

## **3. 수동/예약 거래 시퀀스**

### **개요**  

수동 및 예약 거래 시퀀스는 사용자가 직접 거래 명령을 실행하거나, 예약된 시간에 자동으로 거래를 수행하는 과정을 설명합니다.

### **시나리오 흐름**

#### **수동 거래**  

1. **사용자 입력**: 사용자가 웹 UI를 통해 매수/매도 거래 정보를 입력합니다.  
2. **API 키 요청**: 거래 서버는 사용자DB에서 Upbit API 키를 가져옵니다.  
3. **거래 명령 전송**: 거래 서버가 Upbit 거래소로 거래 명령을 전달합니다.  
4. **결과 반환**: 거래 결과가 사용자에게 반환됩니다.

#### **예약 거래**  

1. **예약 입력**: 사용자가 예약 거래 정보를 입력합니다.  
2. **정보 저장**: 거래 서버는 예약 거래 정보를 저장하고 대기 상태로 둡니다.  
3. **시간 도달**: 예약 시간이 도달하면 거래 서버가 Upbit 거래소에 거래 명령을 실행합니다.  
4. **결과 반환**: 거래 결과가 사용자에게 전달됩니다.

### **다이어그램**  

![Manual/Scheduled Trade Sequence](/Doc/Diagrams/happy_diagrams-sequence_trade.drawio.png)

---

## **4. 자동 거래 시퀀스**

### **개요**  

자동 거래 시퀀스는 사용자가 자동 거래를 시작하면 시스템이 실시간 데이터를 분석하고, 머신러닝 모델을 통해 최적의 매수/매도 명령을 실행하는 과정을 설명합니다.

### **시나리오 흐름**  

1. **거래 시작**: 사용자가 자동 거래 시작 버튼을 클릭합니다.  
2. **데이터 수집**: 거래 서버가 Upbit 거래소에서 데이터를 주기적으로 수집하고 누적합니다.  
3. **가격 예측**:  
   - 데이터가 일정 길이(Sequence Length)에 도달하면 ML 서버로 데이터를 전달합니다.  
   - ML 서버가 예측을 수행하고, 결과를 거래 서버로 반환합니다.  
4. **거래 명령 전송**: 예측 결과가 설정한 임계값을 초과하면 거래 서버가 Upbit 거래소로 거래 명령을 전송합니다.  
5. **거래 종료**: 사용자가 중지 버튼을 클릭하면 자동 거래를 종료합니다.

### **다이어그램**  

![Auto Trade Sequence](/Doc/Diagrams/happy_diagrams-sequence_autoTrade.drawio.png)

---

## **시퀀스 다이어그램 요약**

1. **회원가입 및 거래 키 발급 시퀀스**: 사용자가 회원가입을 수행하고 Upbit 거래 키를 발급 및 저장하는 과정입니다.  
2. **모델 학습 시퀀스**: 누적된 데이터를 바탕으로 매일 학습된 모델을 업데이트하는 과정입니다.  
3. **수동/예약 거래 시퀀스**: 사용자가 직접 거래를 수행하거나 예약 거래를 설정하여 자동으로 실행하는 과정입니다.  
4. **자동 거래 시퀀스**: 실시간 데이터 수집과 모델 예측을 기반으로 자동으로 거래를 실행하고 관리하는 과정입니다.

---

## **다이어그램 참고 경로**

- **회원가입 및 거래 키 발급 시퀀스**: `/Doc/Diagrams/happy_diagrams-sequence_key.drawio.png`  
- **모델 학습 시퀀스**: `/Doc/Diagrams/happy_diagrams-sequence_train.drawio.png`  
- **수동/예약 거래 시퀀스**: `/Doc/Diagrams/happy_diagrams-sequence_trade.drawio.png`  
- **자동 거래 시퀀스**: `/Doc/Diagrams/happy_diagrams-sequence_autoTrade.drawio.png`  

---

이 문서는 시스템의 각 주요 시퀀스에 대한 설명과 시각적 다이어그램을 통합해 보여줍니다.  
이를 통해 **OBservator** 프로젝트의 핵심 기능과 동작 흐름을 한눈에 파악할 수 있습니다.

[👉***README로 돌아가기***](/README.md)
