<div class="orderbook-section" style="flex: 1; padding: 20px; background-color: #ffffff; border: 1px solid #dddddd; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);">
    <h3 style="color: #007BFF; text-align: center;">Order Book (KRW-BTC)</h3>
    
    <!-- 거래 정보 섹션 -->
    <div class="market-info" style="margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 20px;">
        <div style="flex: 1; text-align: center;">
            <h4 style="margin: 0; color: #333;">거래량</h4>
            <p id="trade-volume" style="font-size: 1.2rem; font-weight: bold; color: #28a745;">-</p>
        </div>
        <div style="flex: 1; text-align: center;">
            <h4 style="margin: 0; color: #333;">거래대금</h4>
            <p id="trade-amount" style="font-size: 1.2rem; font-weight: bold; color: #007BFF;">-</p>
        </div>
        <div style="flex: 1; text-align: center;">
            <h4 style="margin: 0; color: #333;">52주 최고</h4>
            <p id="year-high" style="font-size: 1.2rem; font-weight: bold; color: #dc3545;">-</p>
        </div>
        <div style="flex: 1; text-align: center;">
            <h4 style="margin: 0; color: #333;">52주 최저</h4>
            <p id="year-low" style="font-size: 1.2rem; font-weight: bold; color: #28a745;">-</p>
        </div>
        <div style="flex: 1; text-align: center;">
            <h4 style="margin: 0; color: #333;">당일 고가</h4>
            <p id="day-high" style="font-size: 1.2rem; font-weight: bold; color: #dc3545;">-</p>
        </div>
        <div style="flex: 1; text-align: center;">
            <h4 style="margin: 0; color: #333;">당일 저가</h4>
            <p id="day-low" style="font-size: 1.2rem; font-weight: bold; color: #007BFF;">-</p>
        </div>
    </div>

    <!-- 주문 테이블 -->
    <table class="orderbook-table" style="width: 100%; border-collapse: collapse; text-align: center;">
        <thead>
            <tr>
                <th style="padding: 10px; border-bottom: 2px solid #dddddd; background-color: #f5f5f5;">Type</th>
                <th style="padding: 10px; border-bottom: 2px solid #dddddd; background-color: #f5f5f5;">Price</th>
                <th style="padding: 10px; border-bottom: 2px solid #dddddd; background-color: #f5f5f5;">Volume</th>
            </tr>
        </thead>
        <tbody id="orderbook-body">
            <!-- 데이터가 여기에 삽입됩니다 -->
        </tbody>
    </table>
</div>

<script>
    // 예제 데이터
    const buyVolume = 12.34;
    const sellVolume = 10.67;

    // 차트 데이터 생성
    const ctx = document.getElementById("orderbookChart").getContext("2d");
    new Chart(ctx, {
        type: "doughnut",
        data: {
            labels: ["Buy Volume", "Sell Volume"],
            datasets: [
                {
                    data: [buyVolume, sellVolume],
                    backgroundColor: ["#28a745", "#dc3545"],
                    hoverOffset: 4,
                },
            ],
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: "bottom",
                },
            },
        },
    });

    // 업비트 Ticker 데이터 가져오기
async function fetchMarketData() {
    try {
        const response = await fetch("https://api.upbit.com/v1/ticker?markets=KRW-BTC");
        const data = await response.json();
        const marketData = data[0];

        // 거래 정보 업데이트
        document.getElementById("trade-volume").textContent = `${marketData.acc_trade_volume_24h.toFixed(3)} BTC`;
        document.getElementById("trade-amount").textContent = `${(marketData.acc_trade_price_24h / 1e8).toFixed(3)} 백만원`;
        document.getElementById("year-high").textContent = `${marketData.high_price.toLocaleString()} KRW`;
        document.getElementById("year-low").textContent = `${marketData.low_price.toLocaleString()} KRW`;
        document.getElementById("day-high").textContent = `${marketData.high_price.toLocaleString()} KRW`;
        document.getElementById("day-low").textContent = `${marketData.low_price.toLocaleString()} KRW`;
    } catch (error) {
        console.error("Failed to fetch market data:", error);
    }
}

// 초기화 및 5초 간격으로 데이터 업데이트
fetchMarketData();
setInterval(fetchMarketData, 5000);

</script>
